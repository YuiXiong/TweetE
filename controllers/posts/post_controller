const userModel = require("../../models/users/users");
const postModel = require("../../models/users/userPosts");
const mongoose = require('mongoose')

const controller = {
  getAllTweetE: async (req, res) => {
    const tweetE = await postModel.find().exec();
    res.render("posts/post", { tweetE });
  },

  postTweetE: async (req, res) => {
    try {
      await postModel.create({
        tweetEContent: req.body.tweetEContent,
      });
    } catch (err) {
      res.send("Error creating post on DB");
      return;
    }
    //console.log("tweetE successful");
    res.redirect("/post");
  },

  //get one tweet using /post/:postid route to set up for editing tweet
  getOneTweetE: async (req, res) => {
    try {
      const post = await postModel.findById(req.params.postId);
      res.render('posts/show', {post});
    } catch (err) {
      console.log("error", err);
      res.send("Error getting one post from DB");
      return;
    }
    
  },

  //edit tweet using patch route /post/:postid/edit
  editTweetE: async (req,res) => {
    const updatedTweetE = await postModel.updateOne({ _id: req.params.id, tweetEContent}).exec()
  }
};
module.exports = controller;
